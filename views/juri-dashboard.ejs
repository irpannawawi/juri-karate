<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <style>
    	body{
    		background-color: #ededed;
    	}
    	td {
    		align-content: center;
    		text-align: center;
    		font-size: 30px;
    	}
    	th{
    		vertical-align: middle;
    		text-align: center;
    		font-size: 30px;
    	}
    </style>
	</head>
	<body>
		<div class="container">
			<nav class="navbar navbar-light bg-light border-bottom border-primary">
			  <div class="container-fluid">
			    <a class="navbar-brand d-flex align-items-center" href="#">
			      <img src="/images/kki.png" alt="" width="85" height="85" class="d-inline-block align-text-top">
			      <h1 class="align-middle">KKI SUMSEL</h1>
			    </a>
			  </div>
			</nav>
			<div class="row p-3">
				<div class="card">
					<div class="card-header">
						<h4 align="center"><%=username%></h4>
					</div>
					<div class="card-body">
						<div class="row">
							<div class="col table-responsive">
								<table class="table table-bordered ">
							<tr>
								<th>Atletik</th>
								<th style="vertical-align: middle;" id="atletik-nilai">0.0</th>
								<td>
									<div class="d-flex flex-row justify-content-center p-1  ">
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(5.0)">5.0</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(5.2)">5.2</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(5.4)">5.4</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(5.6)">5.6</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(5.8)">5.8</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(6.0)">6.0</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(6.2)">6.2</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(6.4)">6.4</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(6.6)">6.6</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(6.8)">6.8</button>
									</div>
									<div class="d-flex flex-row justify-content-center p-1">
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(7.0)">7.0</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(7.2)">7.2</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(7.4)">7.4</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(7.6)">7.6</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(7.8)">7.8</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(8.0)">8.0</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(8.2)">8.2</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(8.4)">8.4</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(8.6)">8.6</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(8.8)">8.8</button>
									</div>
									<div class="d-flex flex-row justify-content-center p-1">
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(9.0)">9.0</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(9.2)">9.2</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(9.4)">9.4</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(9.6)">9.6</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(9.8)">9.8</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-atletik" onclick="input_nilai_atletik(10.0)">10.0</button>
									</div>
									<div class="d-flex flex-row justify-content-center p-1">
										<button class="btn btn-success form-control btn-nilai-atletik" onclick="konfirmasi_input_nilai_atletik()">Konfirmasi</button>
									</div>
								</td>
							</tr>
							<tr>
								<th>Tehnikal</th>
								<th style="vertical-align: middle;" id="tehnikal-nilai">0.0</th>
								<td>
									<div class="d-flex flex-row justify-content-center p-1  ">
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(5.0)">5.0</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(5.2)">5.2</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(5.4)">5.4</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(5.6)">5.6</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(5.8)">5.8</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(6.0)">6.0</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(6.2)">6.2</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(6.4)">6.4</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(6.6)">6.6</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(6.8)">6.8</button>
									</div>
									<div class="d-flex flex-row justify-content-center p-1">
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(7.0)">7.0</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(7.2)">7.2</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(7.4)">7.4</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(7.6)">7.6</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(7.8)">7.8</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(8.0)">8.0</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(8.2)">8.2</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(8.4)">8.4</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(8.6)">8.6</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(8.8)">8.8</button>
									</div>
									<div class="d-flex flex-row justify-content-center p-1">
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(9.0)">9.0</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(9.2)">9.2</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(9.4)">9.4</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(9.6)">9.6</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(9.8)">9.8</button>
										<button class="btn btn-sm btn-primary bg-gradient p-2 m-1 btn-nilai-tehnikal" onclick="input_nilai_tehnikal(10.0)">10.0</button>
									</div>

									<div class="d-flex flex-row justify-content-center p-1">
										<button class="btn btn-success form-control btn-nilai-tehnikal" onclick="konfirmasi_input_nilai_tehnikal()" >Konfirmasi</button>
									</div>
								</td>
							</tr>
						</table>
							</div>
						</div>
						
					</div>
				</div>
			</div>
			<footer class="d-flex align-items-center justify-content-center py-2 my-2 border-top fixed-bottom">
		      <span class="text-muted">&copy; Sandemo</span>
  		</footer>
		</div>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
		<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="/socket.io/socket.io.js"></script>
    
    <script>
        var socket = io();
        const userId = "<%= username %>"
        socket.on('connected', (data)=>{
        	console.log(data)
        });
        socket.on('reset', (data)=>{
        	console.log(data)
        	if(data.reset_juri){
	        	$('.btn-nilai-atletik').removeClass('disabled');
	        	$('.btn-nilai-tehnikal').removeClass('disabled');
	        	$('#tehnikal-nilai').html(0)
	        	$('#atletik-nilai').html(0)
        	}
        });
        
        // nilai atletik
        let nilai_atletik = 0;
        function input_nilai_atletik(nilai){
        	nilai_atletik = nilai 
        	$('#atletik-nilai').html(nilai)

        }

        function konfirmasi_input_nilai_atletik(){
        	$('#atletik-nilai').html(nilai_atletik)
        	socket.emit("update_nilai_atletik", { nilai:nilai_atletik, juri:userId })
        	$('.btn-nilai-atletik').addClass('disabled');
        	console.log('task complete')
        }

        //nilai tehnikal
        let nilai_tehnikal = 0;
        function input_nilai_tehnikal(nilai){
        	console.log(nilai)
        	nilai_tehnikal = nilai 
        	$('#tehnikal-nilai').html(nilai)

        }

        function konfirmasi_input_nilai_tehnikal(){
        	$('#tehnikal-nilai').html(nilai_tehnikal)
        	socket.emit("update_nilai_tehnikal", { nilai:nilai_tehnikal, juri:userId })
        	$('.btn-nilai-tehnikal').addClass('disabled');
        	console.log('task complete')
        }
    </script>

	</body>
</html>
